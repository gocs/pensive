<!-- This defines the head tag context -->
{{define "head"}}
    {{ $name := "home"}}
    {{if .Name}}{{ $name = .Name}}{{end}}
    <title>pensive/{{$name}} - {{.Title}}</title>
{{end}}

<!-- This defines the body tag context -->
{{define "body"}}
{{block "header" .}}{{end}}
<main class="container">
    <h1>{{.Title}}</h1>

    {{if .DisplayForm}}
    <div>
        <form action="/post" method="post" enctype="multipart/form-data">
            <div class="input-group mb-3">
                <input type="text" name="post" aria-label="Post" class="form-control">
                <input type="file" name="media-source" aria-label="Media source" class="form-control" accept="audio/*,video/*,image/*">
                <button type="submit" class="btn btn-outline-secondary">Submit</button>
            </div>
        </form>
    </div>
    {{end}}
    {{range .Posts}}
    <div>
        <div>
            <strong><a href="/@{{.User.Username}}">@{{.User.Username}}</a>:</strong>
        </div>
        <div>{{.Body}}</div>
        {{if .MediaID}}<div><img src="http://localhost:8080/{{.MediaID}}" alt=""></div>{{end}}
    </div>
    {{end}}
</main>
{{end}}
